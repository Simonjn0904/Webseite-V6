<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Velociraptors – Karte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

  <style>
    body { margin: 0; padding: 0; }
    #map { height: 100vh; }
  </style>
</head>
<body>

<div id="map"></div>

<script>
  // --- URL-Parameter auslesen ---
  const params = new URLSearchParams(window.location.search);
  const lat = parseFloat(params.get("lat")) || 49.0;
  const lng = parseFloat(params.get("lng")) || 9.5;
  const zoom = parseInt(params.get("zoom")) || 6;

  // Karte initialisieren mit Werten aus URL oder Standard
  var map = L.map('map').setView([lat, lng], zoom);

  // Tile-Layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '© OpenStreetMap-Mitwirkende'
  }).addTo(map);

  // Sticker-Marker
  var dinoIcon = L.icon({
    iconUrl: 'velociraptors-logo01-new.png',
    iconSize: [60, 60],
    iconAnchor: [30, 60],
    popupAnchor: [0, -60]
  });

  // Treffpunkt-Marker
  var meetup = L.icon({
    iconUrl: 'meeting-point.png',
    iconSize: [60, 80],
    iconAnchor: [30, 80],  // angepasst: Spitze unten
    popupAnchor: [0, -80]
  });

  // Treffpunkt
  L.marker([49.41325, 8.6919444], { icon: meetup })
    .addTo(map)
    .bindTooltip("<b style='color:red;'>Meeting point for the weekly rides</b>", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker  – Weißer Stein (z. B. "Lena")
  L.marker([49.4530556, 8.7230556], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Simon, 08.02.25", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker  – Ludwigshöhe, Straßlach-Dingharting (z. B. "Tom")
  L.marker([47.9675, 11.5147], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Simon, 17.03.25", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker  – Berggasthof Königstuhl (z. B. "Simon")
  L.marker([49.40246, 8.72780], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Simon, 21.01.25", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker 2 – Teddy
  L.marker([49.404000, 8.727300], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Teddy, 01.12.25", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker 3 – Teddy
  L.marker([49.024100, 8.353200], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Teddy, 07.12.24", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker 4 – Teddy
  L.marker([49.403400, 8.704400], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Teddy, 01.12.24", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker 5– Teddy
  L.marker([-16.289300, -67.827200], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Teddy, 26.01.25", { permanent: true, direction: "right", offset: [10, 0] });

  // Marker 6 – Teddy mit Bild
  L.marker([52.230472, 0.111608], { icon: dinoIcon })
    .addTo(map)
    .bindTooltip("Sticker, Teddy, 02.04.25", { permanent: true, direction: "right", offset: [10, 0] })
    .bindPopup('<a href="/images/teddy_cambridge.jpg" target="_blank">Picture</a>');


</script>

</body>
</html>
